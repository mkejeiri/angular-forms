<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2">
        <!-- 
            angular provides us with a directive ngSubmit 
            to prevent a default behavior of the submit button -->

        <!-- 
            In the 'ts' we use form:ElementRef and it doesn't give access to the JS created by angular,
            we can set #f to something exposed by angular, we know that the form element 
            is kind of a selector for a directive build into angular which will create 
            automatically a JS object and then it will automatically expose some data that
            we could fetch in the form element, we can do it by : #f="ngForm" -> it just a way
            of saying to angular give me access to the form that you automatically created.
            onSubmit(form:ElementRef) will become onSubmit(form:NgForm) -->
      <!-- <form (ngSubmit) ="onSubmit(f)" #f="ngForm">  -->
      <form (ngSubmit) ="onSubmit()" #f="ngForm"> 
        <!-- 
          we could group all relevant data input by using (ngModelGroup="userData") 
        -->
        <div id="user-data" 
          ngModelGroup="userData"
          #userData="ngModelGroup">
          <div class="form-group">
            <label for="username">Username</label>
              <!-- ngModel allows us to register HTML elements/controls (input, select, ...) 
                to make them available in the DOM for JS, we need to set the name though to
                let angular to id the control.

                - use ngModel to tell angular that this is a control
                - use #username="ngModel" for one way binding
                -->
            <input type="text" id="username" 
                        class="form-control" 
                        ngModel 
                        name="username"
                        required
                        #username="ngModel">
                        <!-- required is HTML attribute, angular will detect it, 
                        so it acts as selector for built-in directive shipped with angular
                        and will configure the form to make that invalid if empty 
                          -->
                          <span class="help-block alert alert-danger" *ngIf="!username.valid && username.touched">Usename invalid</span>
          </div>
          <button class="btn btn-default" type="button" (click)="suggestUserName()" >Suggest an Username</button>
          <button type="button" class="btn btn-warning" (click)="onReset()">Reset</button>
          <div class="form-group">
            <label for="email">Mail</label> 
            <!-- 
                - use ngModel to tell angular that this is a control
                - we use #email="ngModel" for one way binding
              -->
            <input type="email" id="email" 
                    class="form-control" 
                    ngModel 
                    name="email"
                    required
                    email
                    #email="ngModel">
                     <!-- 
                      unlike required, email is not a built-in HTML attribute, 
                      but it's still directive for angular (not a selector!)
                    -->
                    <span class="help-block alert alert-danger" *ngIf="!email.valid && email.touched">Email invalid</span>
          </div>          
              <p *ngIf="userData.invalid && userData.touched" class="help-blok"><strong>invalid user data input</strong> </p>         
        </div>
        <div class="form-group">
          <label for="secret">Secret Questions</label>

          <!-- 
            registering and using two ways binding 
            (defaultQuestion) with ngModel -->
          <select id="secret" name ="secret"
                  class="form-control" 
                  [(ngModel)] ="defaultQuestion">

            <option value="pet">Your first Pet?</option>
            <option value="teacher">Your first teacher?</option>
          </select>          
        </div>

        <div class="form-group">
            <label>Message:</label>
            <textarea name="questionAnswer" class="form-control"
            [(ngModel)]="answer"></textarea>
          </div>
          <p class="well" *ngIf="answer != '' || answer !== undefined">Your reply: {{answer}}</p> 

          <div class="radio" *ngFor="let gender of genders">
            <label>
              <!-- 
                use ngModel to make input a control 
                (so we can access it through JS (DOM) controls list!!!) 
              -->
              <input 
                type="radio"
                name="gender" 
                ngModel              
                [value]="gender"
                [(ngModel)]="defaultGender"
                required>{{gender}}
            </label>
          </div>

        <!-- W A R N I N G: if we listen to submit (click) here the defaut behaviour 
          will be triggered and form will be submitted, it will trigger JS submit event, 
          this is how it build into HTML...
          to prevent this, angular provides us with a directive ngSubmit (to be placed in the form tag) -->
        <button class="btn btn-primary" type="submit" [disabled]="!f.valid">Submit</button>
      </form>
    </div>
  </div>
  <hr>
  <div class="row" *ngIf="submitted">
    <div class="col-xs-12">
      <h3>Your Data</h3>
      <p>Username: {{user.username}}</p>
      <p>Mail:  {{user.email}}</p>
      <p>Secret Question: {{user.secretQuestion}}</p>
      <p>Answer: {{user.questionAnswer}}</p>
      <p>Gender:  {{user.gender}}</p>
    </div>
  </div>
</div>
